<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.6">
<title data-react-helmet="true">State-Based Property Testing Tutorial (Part 2 - Vars) | Hedgehog</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://hedgehogqa.github.io/scala-hedgehog/docs/guides-state-tutorial-vars"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="State-Based Property Testing Tutorial (Part 2 - Vars) | Hedgehog"><meta data-react-helmet="true" name="description" content="State-Based Property Testing Tutorial (Part 2 - Vars)"><meta data-react-helmet="true" property="og:description" content="State-Based Property Testing Tutorial (Part 2 - Vars)"><link data-react-helmet="true" rel="shortcut icon" href="/scala-hedgehog/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://hedgehogqa.github.io/scala-hedgehog/docs/guides-state-tutorial-vars"><link data-react-helmet="true" rel="alternate" href="https://hedgehogqa.github.io/scala-hedgehog/docs/guides-state-tutorial-vars" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://hedgehogqa.github.io/scala-hedgehog/docs/guides-state-tutorial-vars" hreflang="x-default"><link rel="stylesheet" href="/scala-hedgehog/assets/css/styles.916fe981.css">
<link rel="preload" href="/scala-hedgehog/assets/js/runtime~main.32502b43.js" as="script">
<link rel="preload" href="/scala-hedgehog/assets/js/main.b1c5dfa8.js" as="script">
</head>
<body>
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):(window.matchMedia("(prefers-color-scheme: light)").matches,e("light"))}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/scala-hedgehog/"><img src="/scala-hedgehog/img/hedgehog-logo-32x32.png" alt="Hedgehog Logo" class="themedImage_TMUO themedImage--light_4Vu1 navbar__logo"><img src="/scala-hedgehog/img/hedgehog-logo-32x32.png" alt="Hedgehog Logo" class="themedImage_TMUO themedImage--dark_uzRr navbar__logo"><b class="navbar__title">Hedgehog</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/scala-hedgehog/docs/">Docs</a><a class="navbar__item navbar__link" target="_blank" href="/scala-hedgehog/api">API</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/hedgehogqa/scala-hedgehog" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle toggle_2i4l react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_iYfV">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button class="clean-btn backToTopButton_i9tI" type="button"><svg viewBox="0 0 24 24" width="28"><path d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z" fill="currentColor"></path></svg></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh menuWithAnnouncementBar_+O1J"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON">Hedgehog for Scala</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/">Hedgehog</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/motivation">Motivation</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/resources">Resources</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/alternatives">Alternatives</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON">Guides</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/guides">Guides</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/guides-tutorial">Tutorial</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/guides-state-tutorial">State-Based Testing (1)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/scala-hedgehog/docs/guides-state-tutorial-vars">State-Based Testing (2)</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/guides-migration-from-scalacheck">Migration From ScalaCheck</a></li><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/guides-haskell-differences">Differences to Haskell Hedgehog</a></li></ul></li><li class="theme-doc-sidebar-item-category menu__list-item"><a class="menu__link menuLinkText_OKON">Integration</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link menu__list-item"><a class="menu__link" tabindex="0" href="/scala-hedgehog/docs/integration-minitest">Minitest</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>State-Based Property Testing Tutorial (Part 2 - Vars)</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="state-based-property-testing-tutorial-part-2---vars"></a>State-Based Property Testing Tutorial (Part 2 - Vars)<a class="hash-link" href="#state-based-property-testing-tutorial-part-2---vars" title="Direct link to heading">#</a></h2><p>This tutorial continues on from the <a href="/scala-hedgehog/docs/guides-state-tutorial">first tutorial</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="follow-along"></a>Follow Along<a class="hash-link" href="#follow-along" title="Direct link to heading">#</a></h2><p>Please feel to play along and tinker with the code.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI"><pre tabindex="0" class="prism-code language-undefined codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ ./sbt</span></span><span class="token-line" style="color:#403f53"><span class="token plain">&gt; example/runMain hedgehog.examples.state.CRTest</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="the-problem"></a>The Problem<a class="hash-link" href="#the-problem" title="Direct link to heading">#</a></h2><p>To start with let&#x27;s define an interface/abstraction for something we want to
test against, part of a basic create/read/update/delete or <a href="https://en.wikipedia.org/wiki/Create,_read,_update_and_delete" target="_blank" rel="noopener noreferrer">CRUD</a> store, which
I&#x27;m calling <code>CR</code> as we only support create/read to simplify the example:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">trait CR {</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  def create(v: String): CRId</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  def read(id: CRId): Option[String]</span></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">case class CRId(render: String)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>NOTE: The big difference here from the previous <code>KV</code> is that the service is
returning it&#x27;s own identifier instead of being passed on. That has implications
for testing the state with Hedgehog, which require something extra...</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="model-take-1"></a>Model (take 1)<a class="hash-link" href="#model-take-1" title="Direct link to heading">#</a></h3><p>Similar to our previous example, this also seems fairly straight forward.
But we&#x27;re about to hit a snag...</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">case class State(map: Map[CRId, String])</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>And our command input types:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">case class Create(value: String)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">case class Read(id: CRId)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Now let&#x27;s step throught the <code>Command</code> functions for <code>create</code>/<code>read</code> like
before:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="gen"></a>Gen<a class="hash-link" href="#gen" title="Direct link to heading">#</a></h3><p>Generation is fairly typical. Note that we can&#x27;t really usefully create a
<code>Read</code> value until we have at least one value in <code>State</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">def gen(s: State): Option[Gen[Create]] =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  Some(for {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    v &lt;- Gen.string(Gen.ascii, Range.linear(1, 10))</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  } yield Create(v))</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">def gen(s: State): Option[Gen[Read]] =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  s.map.keys.toList match {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    case Nil =&gt;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">      // We haven&#x27;t created anything yet</span></span><span class="token-line" style="color:#403f53"><span class="token plain">      None</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    case h :: t =&gt;</span></span><span class="token-line" style="color:#403f53"><span class="token plain">      Some(Gen.element(h, t).map(Read(_)))</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="execute-take-1"></a>Execute (take 1)<a class="hash-link" href="#execute-take-1" title="Direct link to heading">#</a></h3><p>So far everything lines up just like before:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">def execute(i: Create): Either[String, CRId] =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  Right(cr.create(i.key, i.value))</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">def execute(i: Read): Either[String, Option[String]] =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  Right(cr.read(i.key))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="update"></a>Update<a class="hash-link" href="#update" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">def update(s: State, i: Create, o: Var[CRId]): State =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  s.copy(map = s.map + (o -&gt; i.value))</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">// There are no side-effects for get, so nothing to do</span></span><span class="token-line" style="color:#403f53"><span class="token plain">def update(s: State, i: Read): State =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  s</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>Hang on, what&#x27;s that <code>Var[CRid]</code> doing?!? Why isn&#x27;t it just a concrete <code>CRId</code>?
That code doesn&#x27;t even compile!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="wtf"></a>WTF<a class="hash-link" href="#wtf" title="Direct link to heading">#</a></h3><p>It turns out that Hedgehog forces a very clear separation for functions that
can access the &quot;real world&quot; state, and those that can&#x27;t. The reasons for this
are a little involved, but the basic idea is that we can generate a full
sequence of commands up-front, without having called <code>execute</code>. So the
question/problem then becomes, how do we capture the &quot;result&quot; to be used in
<code>gen</code>, like we <em>need</em> to do for <code>read</code>?</p><p>This is where <code>Var</code> and <code>Environment</code> come in. For each <code>Command.execute</code>,
Hedgehog allocates a unique <code>Name</code> (just a plain old incrementing <code>Int</code>), and
passed <em>that</em> to the &quot;pure&quot; functions, like <code>update</code> and <code>gen</code>. It&#x27;s only when
we need the <em>concrete</em> values do we get access to the <code>Environment</code> to look
them up.</p><p>Here is the relevant data types, that should hopefully make more sense now?</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">case class Name(value: Int)</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">case class Environment(map: Map[Name, Any])</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">case class Var[A](name: Name) {</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  def get(env: Env): A =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">    env.map(name)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="model-take-2"></a>Model (take 2)<a class="hash-link" href="#model-take-2" title="Direct link to heading">#</a></h3><p>So we will need to tweak our model and input slightly to use <code>Var</code>:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">case class State(map: Map[Var[CRId], String])</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">case class Read(id: Var[CRId])</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="execute-take-2"></a>Execute (take 2)<a class="hash-link" href="#execute-take-2" title="Direct link to heading">#</a></h3><p>So let&#x27;s try that again. Note that we now use <code>Environment</code> in the <code>Read</code>
version to <code>get</code> the concrete <code>CRId</code> returned from <code>create</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">def execute(env: Environment, i: Create): Either[String, CRId] =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  Right(cr.create(i.key, i.value))</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">def execute(env: Environment, i: Read): Either[String, Option[String]] =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  Right(cr.read(i.key.get(env)))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor anchor__h3 anchorWithStickyNavbar_y2LR" id="ensure"></a>Ensure<a class="hash-link" href="#ensure" title="Direct link to heading">#</a></h3><p>This is identical to <code>KV</code>, although notice we <em>could</em> use <code>Environment</code> here if
we needed to, unlike <code>update</code>.</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">// Almost the reverse of update, for side-effect operations we may not observe anything just yet</span></span><span class="token-line" style="color:#403f53"><span class="token plain">def ensure(env: Environment, s0: State, s1: State, i: Create, o: CRId): Result =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  Result.success</span></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#403f53"><span class="token plain">def ensure(env: Environment, s0: State, s1: State, i: Read, o: Option[String]): Result =</span></span><span class="token-line" style="color:#403f53"><span class="token plain">  s1.map.get(i.key) ==== o</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="debugging"></a>Debugging<a class="hash-link" href="#debugging" title="Direct link to heading">#</a></h2><p>Let&#x27;s look at the output of a failed test again:</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI scala"><pre tabindex="0" class="prism-code language-scala codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">Var(Name(0)) = Create(a)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">Var(Name(1)) = Create(b)</span></span><span class="token-line" style="color:#403f53"><span class="token plain">Var(Name(2)) = Read(Var(Name(0)))</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><p>We can start to see that each command is shown to be assigning the result to a
new, unique <code>Var</code>. We aren&#x27;t looking at the <em>actual</em> <code>CRId</code> values.  Hedgehog
(currently) can&#x27;t tell that <code>Read</code> doesn&#x27;t actually return anything (useful)
and so the <code>Unit</code> value is also asigned to a new <code>Var</code>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor anchor__h2 anchorWithStickyNavbar_y2LR" id="resources"></a>Resources<a class="hash-link" href="#resources" title="Direct link to heading">#</a></h2><p>Unfortunately there isn&#x27;t much documentation for this approach at the moment.</p><ul><li><a href="http://www.cse.chalmers.se/~nicsma/papers/finding-race-conditions.pdf" target="_blank" rel="noopener noreferrer">Finding Race Conditions in Erlang with QuickCheck and PULSE</a>
Hedgehog follows a vague description of this implementation which is mentioned
in this paper.</li><li><a href="https://teh.id.au/posts/2017/07/15/state-machine-testing/index.html#parameterised-actions" target="_blank" rel="noopener noreferrer">State machine testing with Hedgehog</a></li><li><a href="/scala-hedgehog/docs/guides-haskell-differences#state-vars">Haskell Differences</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/scala-hedgehog/docs/guides-state-tutorial"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« State-Based Testing (1)</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/scala-hedgehog/docs/guides-migration-from-scalacheck"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Migration From ScalaCheck Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#state-based-property-testing-tutorial-part-2---vars" class="table-of-contents__link">State-Based Property Testing Tutorial (Part 2 - Vars)</a></li><li><a href="#follow-along" class="table-of-contents__link">Follow Along</a></li><li><a href="#the-problem" class="table-of-contents__link">The Problem</a><ul><li><a href="#model-take-1" class="table-of-contents__link">Model (take 1)</a></li><li><a href="#gen" class="table-of-contents__link">Gen</a></li><li><a href="#execute-take-1" class="table-of-contents__link">Execute (take 1)</a></li><li><a href="#update" class="table-of-contents__link">Update</a></li><li><a href="#wtf" class="table-of-contents__link">WTF</a></li><li><a href="#model-take-2" class="table-of-contents__link">Model (take 2)</a></li><li><a href="#execute-take-2" class="table-of-contents__link">Execute (take 2)</a></li><li><a href="#ensure" class="table-of-contents__link">Ensure</a></li></ul></li><li><a href="#debugging" class="table-of-contents__link">Debugging</a></li><li><a href="#resources" class="table-of-contents__link">Resources</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/scala-hedgehog/docs/">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/scala-hedgehog/docs/guides/">Guides</a></li><li class="footer__item"><a class="footer__link-item" href="/scala-hedgehog/docs/integration-minitest/">Integration</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/hedgehogqa/scala-hedgehog" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 Hedgehog, Website built with Docusaurus.<br><div>Some icons made by <a href="https://www.flaticon.com/authors/darius-dan" title="Darius Dan">Darius Dan</a> and <a href="https://www.flaticon.com/authors/pixel-perfect" title="Pixel perfect">Pixel perfect</a> from <a href="https://www.flaticon.com/" title="Flaticon"> www.flaticon.com</a></div></div></div></div></footer></div>
<script src="/scala-hedgehog/assets/js/runtime~main.32502b43.js"></script>
<script src="/scala-hedgehog/assets/js/main.b1c5dfa8.js"></script>
</body>
</html>